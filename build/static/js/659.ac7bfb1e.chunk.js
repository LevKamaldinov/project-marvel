"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[659,210],{749:(e,a,s)=>{s.r(a),s.d(a,{default:()=>o});var t=s(270),c=s(689),r=s(791),n=s(304),i=s(523),l=s(184);const o=()=>{const{id:e}=(0,c.UO)(),[a,s]=(0,r.useState)([]),{loading:t,error:o,clearError:h,getCharacter:m,process:u,setProcess:j}=(0,n.Z)();(0,r.useEffect)((()=>{_()}),[e]);const _=()=>{h(),m(e).then((e=>s(e))).then((()=>j("confirmed")))};return(0,l.jsx)(l.Fragment,{children:(0,i.Z)(u,d,a)})},d=e=>{let{data:a}=e;const{thumbnail:s,description:c,name:r}=a;return(0,l.jsxs)("div",{className:"char-page",children:[(0,l.jsxs)(t.q,{children:[(0,l.jsx)("meta",{name:"description",content:"Page about ".concat(r)}),(0,l.jsx)("title",{children:"".concat(r," page")})]}),(0,l.jsx)("img",{src:s,alt:r,className:"char-page__img"}),(0,l.jsxs)("div",{className:"char-page__info",children:[(0,l.jsx)("h2",{className:"char-page__name",children:r}),(0,l.jsx)("p",{className:"char-page__descr",children:c})]})]})}},613:(e,a,s)=>{s.d(a,{Z:()=>r});const t=s.p+"static/media/error.42292aa12b6bc303ce99.gif";var c=s(184);const r=()=>(0,c.jsx)("img",{style:{display:"block",width:"250px",height:"250px",objectFit:"contain",margin:"0 auto"},src:t,alt:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"})},170:(e,a,s)=>{s.r(a),s.d(a,{default:()=>C});var t=s(791),c=s(270),r=s(304),n=s(523);const i=s.p+"static/media/mjolnir.61f31e1809f12183a524.png";var l=s(184);const o=e=>{let{data:a}=e;const{name:s,description:t,thumbnail:c,homepage:r,wiki:n}=a;let i="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===c?{objectFit:"contain"}:null;return(0,l.jsxs)("div",{className:"randomchar__block",children:[(0,l.jsx)("img",{src:c,alt:"Random character",className:"randomchar__img",style:i}),(0,l.jsxs)("div",{className:"randomchar__info",children:[(0,l.jsx)("p",{className:"randomchar__name",children:s}),(0,l.jsx)("p",{className:"randomchar__descr",children:t}),(0,l.jsxs)("div",{className:"randomchar__btns",children:[(0,l.jsx)("a",{href:r,className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"homepage"})}),(0,l.jsx)("a",{href:n,className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},d=()=>{const[e,a]=(0,t.useState)({}),{loading:s,error:c,getCharacter:d,clearError:h,process:m,setProcess:u}=(0,r.Z)();(0,t.useEffect)((()=>{_()}),[]);const j=e=>{a(e)},_=()=>{h();const e=Math.floor(400*Math.random()+1011e3);d(e).then(j).then((()=>u("confirmed")))};return(0,l.jsxs)("div",{className:"randomchar",children:[(0,n.Z)(m,o,e),(0,l.jsxs)("div",{className:"randomchar__static",children:[(0,l.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,l.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,l.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,l.jsx)("button",{className:"button button__main",onClick:_,children:(0,l.jsx)("div",{className:"inner",children:"try it"})}),(0,l.jsx)("img",{src:i,alt:"mjolnir",className:"randomchar__decoration"})]})]})};var h=s(983),m=s(255),u=s(613),j=s(282);const _=e=>{const[a,s]=(0,t.useState)([]),[c,n]=(0,t.useState)(!1),[i,o]=(0,t.useState)(210),[d,_]=(0,t.useState)(!1),{loading:x,error:p,process:g,setProcess:b,getAllCharacters:v}=(0,r.Z)();(0,t.useEffect)((()=>{f(i,!0)}),[]);const f=(e,a)=>{n(!a),v(e).then(N).then((()=>b("confirmed")))},N=e=>{let a=!1;e.length<9&&(a=!0),s((a=>[...a,...e])),n((e=>!1)),o((e=>e+9)),_((e=>a))},k=(0,t.useRef)([]),y=e=>{k.current.forEach((e=>e.classList.remove("char__item_selected"))),k.current[e].classList.add("char__item_selected"),k.current[e].focus()};const C=(0,t.useMemo)((()=>((e,a,s)=>{switch(e){case"waiting":return(0,l.jsx)(j.Z,{});case"loading":return s?(0,l.jsx)(a,{}):(0,l.jsx)(j.Z,{});case"confirmed":return(0,l.jsx)(a,{});case"error":return(0,l.jsx)(u.Z,{});default:throw new Error("Unexpected process state")}})(g,(()=>function(a){const s=a.map(((a,s)=>{let t={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a.thumbnail&&(t={objectFit:"unset"}),(0,l.jsx)(h.Z,{in:!c,timeout:300,classNames:"charListItem",children:(0,l.jsxs)("li",{className:"char__item",tabIndex:0,ref:e=>k.current[s]=e,onClick:()=>{e.onCharSelected(a.id),y(s)},onKeyPress:t=>{" "!==t.key&&"Enter"!==t.key||(e.onCharSelected(a.id),y(s))},children:[(0,l.jsx)("img",{src:a.thumbnail,alt:a.name,style:t}),(0,l.jsx)("div",{className:"char__name",children:a.name})]},a.id)})}));return(0,l.jsx)(m.Z,{component:null,children:(0,l.jsx)("ul",{className:"char__grid",children:s})})}(a)),c)),[g]);return(0,l.jsxs)("div",{className:"char__list",children:[C,(0,l.jsx)("button",{className:"button button__main button__long",disabled:c,style:{display:d?"none":"block"},onClick:()=>f(i),children:(0,l.jsx)("div",{className:"inner",children:"load more"})})]})},x=e=>{let{data:a}=e;const{name:s,description:t,thumbnail:c,homepage:r,wiki:n,comics:i}=a;let o=i.map(((e,a)=>(0,l.jsx)("li",{className:"char__comics-item",children:e.name},a)));let d="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===c?{objectFit:"contain"}:null;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"char__basics",children:[(0,l.jsx)("img",{src:c,alt:s,style:d}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"char__info-name",children:s}),(0,l.jsxs)("div",{className:"char__btns",children:[(0,l.jsx)("a",{href:r,className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"homepage"})}),(0,l.jsx)("a",{href:n,className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),(0,l.jsx)("div",{className:"char__descr",children:t}),(0,l.jsx)("div",{className:"char__comics",children:"Comics:"}),(0,l.jsx)("ul",{className:"char__comics-list",children:0===o.length?"\u041a\u043e\u043c\u0438\u043a\u0441\u044b \u0441 \u0443\u0447\u0430\u0441\u0442\u0438\u0435\u043c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442":o})]})},p=e=>{const[a,s]=(0,t.useState)(null),{loading:c,error:i,clearError:o,process:d,setProcess:h,getCharacter:m}=(0,r.Z)();(0,t.useEffect)((()=>{j()}),[]);const u=e.charId;(0,t.useEffect)((()=>{j()}),[u]);const j=()=>{u&&(o(),m(u).then(_).then((()=>h("confirmed"))))},_=e=>{s(e)};return(0,l.jsx)("div",{className:"char__info",children:(0,n.Z)(d,x,a)})};var g=s(87),b=s(705),v=s(267);const f=e=>{const[a,s]=(0,t.useState)(null),[c,n]=(0,t.useState)([]),{getChar:i}=(0,r.Z)(),o=(0,l.jsxs)("div",{className:"form__result__plus",children:[(0,l.jsxs)("p",{children:["There is! Visit ",a," page?"]}),(0,l.jsx)("div",{children:(0,l.jsx)(g.rU,{to:"/char/".concat(c.id),children:(0,l.jsx)("button",{type:"button",className:"form__result__button",children:"TO PAGE"})})})]});let d=a?o:0===a?(0,l.jsx)("div",{className:"form__result__zero",children:(0,l.jsx)("p",{children:"The character was not found. Check the name and try again"})}):null;return(0,l.jsx)(b.J9,{initialValues:{name:""},validationSchema:v.Ry({name:v.Z_().required("This field is required")}),onSubmit:e=>{var a;a=e.name,s(null),i().then((e=>e.filter((e=>e.name===a))[0])).then((e=>{e?(n(e),s(e.name)):s(0)})),console.log(JSON.stringify(e,null,2))},children:(0,l.jsxs)(b.l0,{className:"form",onChange:e=>e.target.value?null:s(null),children:[(0,l.jsx)("label",{htmlFor:"name",className:"form__label",children:(0,l.jsx)("b",{children:"Or find a character by name:"})}),(0,l.jsx)(b.gN,{id:"name",name:"name",type:"text",className:"form__input",placeholder:"Enter name"}),(0,l.jsx)("button",{type:"submit",className:"form__button",children:"FIND"}),(0,l.jsx)(b.Bc,{className:"error",name:"name",component:"div"}),d]})})};s(749);class N extends t.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e,a){console.log(e,a),this.setState({error:!0})}render(){return this.state.error?(0,l.jsx)(u.Z,{}):this.props.children}}const k=N,y=s.p+"static/media/vision.067d4ae1936d64a577ce.png",C=()=>{const[e,a]=(0,t.useState)(null),[s,r]=(0,t.useState)(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.q,{children:[(0,l.jsx)("meta",{name:"description",content:"Marvel information portal"}),(0,l.jsx)("title",{children:"Marvel information portal"})]}),(0,l.jsx)(k,{children:(0,l.jsx)(d,{})}),(0,l.jsxs)("div",{className:"char__content",children:[(0,l.jsx)(k,{children:(0,l.jsx)(_,{onCharSelected:e=>{a(e)}})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(k,{children:(0,l.jsx)(p,{charId:e})}),(0,l.jsx)(k,{children:(0,l.jsx)(f,{onCharName:e=>{r(e)}})})]})]}),(0,l.jsx)("img",{className:"bg-decoration",src:y,alt:"vision"})]})}},304:(e,a,s)=>{s.d(a,{Z:()=>c});var t=s(791);const c=()=>{const{loading:e,request:a,error:s,clearError:c,process:r,setProcess:n}=(()=>{const[e,a]=(0,t.useState)("waiting");return{request:(0,t.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"};a("loading");try{const a=await fetch(e,{method:s,body:t,headers:c});if(!a.ok)throw new Error("Could not fetch ".concat(e,", status: ").concat(a.status));return await a.json()}catch(r){throw a("error"),r}}),[]),clearError:(0,t.useCallback)((()=>{a("loading")}),[]),process:e,setProcess:a}})(),i="https://gateway.marvel.com:443/v1/public/",l="apikey=677f4f151277ce2120c892cebbe0e1ba",o=e=>{let a=e.description;return a=a?"".concat(a.slice(0,200),"..."):"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",{id:e.id,name:e.name,description:a,thumbnail:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension),homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items.slice(0,10),title:e.title}},d=e=>{var a;let s=e.prices[0].price;return s=s?"".concat(e.prices[0].price,"$"):"\u041a\u043e\u043c\u0438\u043a\u0441 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u043f\u0440\u043e\u0434\u0430\u0436\u0435",{id:e.id,description:e.description||"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u0438\u043a\u0441\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",thumbnail:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension),title:e.title.length>50?"".concat(e.title.slice(0,50),"..."):e.title,price:s,language:(null===(a=e.textObjects[0])||void 0===a?void 0:a.language)||"en-us",pageCount:e.pageCount?"".concat(e.pageCount," p."):"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435 \u043b\u0438\u0441\u0442\u043e\u0432 \u0432 \u043a\u043e\u043c\u0438\u043a\u0441\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}};return{clearError:c,process:r,setProcess:n,getAllCharacters:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return(await a("".concat(i,"characters?limit=9&offset=").concat(e,"&").concat(l))).data.results.map(o)},getCharacter:async e=>{const s=await a("".concat(i,"characters/").concat(e,"?").concat(l));return o(s.data.results[0])},getAllComics:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return(await a("".concat(i,"comics?limit=8&offset=").concat(e,"&").concat(l))).data.results.map(d)},getComics:async e=>{const s=await a("".concat(i,"comics/").concat(e,"?").concat(l));return d(s.data.results[0])},getChar:async()=>(await a("".concat(i,"characters?").concat(l))).data.results.map(o)}}},523:(e,a,s)=>{s.d(a,{Z:()=>i});var t=s(282),c=s(613),r=s(184);const n=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,r.jsxs)("div",{className:"skeleton",children:[(0,r.jsxs)("div",{className:"pulse skeleton__header",children:[(0,r.jsx)("div",{className:"pulse skeleton__circle"}),(0,r.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,r.jsx)("div",{className:"pulse skeleton__block"}),(0,r.jsx)("div",{className:"pulse skeleton__block"}),(0,r.jsx)("div",{className:"pulse skeleton__block"})]})]}),i=(e,a,s)=>{switch(e){case"waiting":return(0,r.jsx)(n,{});case"loading":return(0,r.jsx)(t.Z,{});case"confirmed":return(0,r.jsx)(a,{data:s});case"error":return(0,r.jsx)(c.Z,{});default:throw new Error("Unexpected process state")}}}}]);
//# sourceMappingURL=659.ac7bfb1e.chunk.js.map